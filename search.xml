<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Androidå¹³å°æ•´åˆH5WebAppï¼Œé›†æˆä¼ä¸šå¾®ä¿¡SDK</title>
      <link href="2021/01/22/android-ping-tai-zheng-he-h5webapp-ji-cheng-qi-ye-wei-xin-sdk/"/>
      <url>2021/01/22/android-ping-tai-zheng-he-h5webapp-ji-cheng-qi-ye-wei-xin-sdk/</url>
      
        <content type="html"><![CDATA[<h1 id="Androidå¹³å°æ•´åˆH5WebAppï¼Œé›†æˆä¼ä¸šå¾®ä¿¡SDK"><a href="#Androidå¹³å°æ•´åˆH5WebAppï¼Œé›†æˆä¼ä¸šå¾®ä¿¡SDK" class="headerlink" title="Androidå¹³å°æ•´åˆH5WebAppï¼Œé›†æˆä¼ä¸šå¾®ä¿¡SDK"></a>Androidå¹³å°æ•´åˆH5WebAppï¼Œé›†æˆä¼ä¸šå¾®ä¿¡SDK</h1><h3 id="ä¸€ã€æ•´åˆå‰å‡†å¤‡"><a href="#ä¸€ã€æ•´åˆå‰å‡†å¤‡" class="headerlink" title="ä¸€ã€æ•´åˆå‰å‡†å¤‡"></a>ä¸€ã€æ•´åˆå‰å‡†å¤‡</h3><ol><li><p>ä¸‹è½½<a href="https://nativesupport.dcloud.net.cn/AppDocs/download/android">AndroidSDK</a></p></li><li><p><a href="https://work.weixin.qq.com/api/doc/90000/90138/91074">ä¼ä¸šå¾®ä¿¡ç§»åŠ¨ç«¯SDK</a>èµ„æºä¸‹è½½ï¼Œå°†ç­¾åç”Ÿæˆå·¥å…·å®‰è£…åœ¨æ‰‹æœºç«¯ï¼Œä¹‹ååœ¨è·å–ä¼ä¸šå¾®ä¿¡ç™»å½•æƒé™æ—¶éœ€è¦ç”¨åˆ°ã€‚</p><blockquote><p>ä½¿ç”¨ä¼ä¸šå¾®ä¿¡ç™»å½•ã€åˆ†äº«åŠŸèƒ½éœ€è¦ç”¨åˆ°æ–‡ä»¶å¦‚ä¸‹ã€‚<br>ç‚¹å‡»ä¸‹è½½<a href="http://open.work.weixin.qq.com/wwopen/downloadfile/wwapi.zip">Androidå¼€å‘å·¥å…·åŒ…é›†åˆ</a> ã€‚æ¯ä¸ªç¬¬ä¸‰æ–¹åº”ç”¨å¿…é¡»è¦å¯¼å…¥è¯¥SDKåº“ï¼Œç”¨äºå®ç°ä¸ä¼ä¸šå¾®ä¿¡çš„é€šä¿¡<br>ç‚¹å‡»ä¸‹è½½ <a href="http://dldir1.qq.com/qqcontacts/Gen_Signature_Android.apk">ç­¾åç”Ÿæˆå·¥å…·</a>ã€‚å®‰è£…æ­¤å·¥å…·ï¼Œæ ¹æ®æŒ‡å¼•ç”Ÿæˆçš„åº”ç”¨ç­¾åå­—ç¬¦ä¸²å¹¶å¡«å†™åœ¨åº”ç”¨ç®¡ç†å¹³å°ä¸Šï¼Œæœªå¡«å†™æˆ–è€…å¡«å†™é”™è¯¯å°†å¯¼è‡´æ¥å£æ— æ³•ä½¿ç”¨ã€‚<br>ç‚¹å‡»ä¸‹è½½<a href="http://dldir1.qq.com/qqcontacts/apitest_2.zip">æ¥å£ä½¿ç”¨Demo</a>ã€‚å¼€å‘è€…å¯ä»¥å‚è€ƒDemoä¸­çš„æ¥å£ä½¿ç”¨æ–¹å¼è¿›è¡Œå¼€å‘ã€‚</p></blockquote></li><li><p>å¿…è¦å¼€å‘è½¯ä»¶è‡ªè¡Œä¸‹è½½</p><ul><li>Android studio</li><li>Hbuilder</li></ul></li></ol><h3 id="äºŒã€å¯¼å…¥AndroidDemo"><a href="#äºŒã€å¯¼å…¥AndroidDemo" class="headerlink" title="äºŒã€å¯¼å…¥AndroidDemo"></a>äºŒã€å¯¼å…¥AndroidDemo</h3><ol><li><p>sdkç›®å½•         </p><p><img src="https://i.loli.net/2021/01/22/9bTciu8DAyv1kNS.png"> </p></li><li><p>å°†HBuilder-Helloå¯¼å…¥Android Studioï¼Œåœ¨å¯¼å…¥è¿‡ç¨‹ä¸­å¯èƒ½ä¼šå‡ºç°å„ç§å¥‡å¥‡æ€ªæ€ªçš„é—®é¢˜ï¼Œè¯·è‡ªè¡Œç™¾åº¦è§£å†³ï¼Œåœ¨è¿™é‡Œæä¾›ä¸€äº›å¯èƒ½ä¼šå‡ºç°é—®é¢˜çš„è§£å†³æ–¹æ³•</p><ul><li><p><strong>Error:Connection timed out: connect. If you are behind an HTTP proxy, please configure the proxy settings either in IDE or Gradle.</strong></p><p>ç”±äºç½‘ç»œåŸå› ï¼Œæ— æ³•ä¸‹è½½gradleï¼Œè§£å†³åŠæ³•ï¼š</p><p>åœ¨é¡¹ç›®ç›®å½•ï¼Œâ€œ<em>\gradle\wrapper\gradle-wrapper.properties</em>â€ä¸­æŸ¥çœ‹å½“å‰é¡¹ç›®æ‰€éœ€è¦çš„gradleç‰ˆæœ¬å·ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼šgradleçš„ç‰ˆæœ¬ä¸ºgradle-6.5-all.zip</p><p><code>distributionUrl=https\://services.gradle.org/distributions/gradle-6.5-all.zip</code></p><p>åœ¨<a href="https://www.androiddevtools.cn/">androiddevtools</a>ä¸­ä¸‹è½½å¯¹åº”çš„gradleåŒ…ï¼Œä¸‹è½½å¥½ä¹‹åç›´æ¥ä¸¢è¿›â€<em>C:\Users\zora\.gradle\wrapper\dists\gradle-6.5-all\&lt;éšæœºç”Ÿæˆçš„å­—ç¬¦ä¸²&gt;</em>â€œé‡Œé¢ï¼Œé‡æ–°è¿è¡ŒAndroid Studio</p></li><li><p><strong>Error:Cause: failed to find target with hash string â€˜android-23â€™</strong></p><p>ç¼ºå°‘å¯¹åº”çš„SDKæ–‡ä»¶ï¼Œè§£å†³æ–¹æ³•ï¼šåœ¨Android Studioä¸­æ‰“å¼€â€File&gt;Settingsâ€œ,æœç´¢sdkï¼Œä¸‹è½½å¯¹åº”çš„sdkæ–‡ä»¶ï¼Œé‡æ–°rebuildé¡¹ç›®ã€‚</p></li></ul></li></ol><h3 id="ä¸‰ã€æ•´åˆwebApp"><a href="#ä¸‰ã€æ•´åˆwebApp" class="headerlink" title="ä¸‰ã€æ•´åˆwebApp"></a>ä¸‰ã€æ•´åˆwebApp</h3><p>å®˜æ–¹ç¦»çº¿æ‰“åŒ…å‚è€ƒé“¾æ¥ï¼š<a href="https://nativesupport.dcloud.net.cn/AppDocs/usesdk/android">Androidç¦»çº¿æ‰“åŒ…</a></p><ol><li><p>â€‹    æ‰“åŒ…H5+APP</p><p>åœ¨HBuilderä¸­ï¼Œæ‰“åŒ…æˆæœ¬åœ°èµ„æºï¼Œå°†èµ„æºæ–‡ä»¶æ”¾åœ¨HBuilder-Helloçš„â€<em>\app\src\main\assets\apps&lt;webAppå¯¹åº”idï¼Œåœ¨manifest.jsonä¸­æŸ¥çœ‹&gt;\www</em>â€œä¸­ï¼Œå¦‚æœæ²¡æœ‰è¯¥æ–‡ä»¶å¤¹åˆ™åˆ›å»ºä¸€ä¸ªwwwç©ºæ–‡ä»¶å¤¹ã€‚</p><p><img src="https://i.loli.net/2021/01/22/YTknLBd324DbVgN.png">  <img src="https://i.loli.net/2021/01/22/sxlPiqzvEt2OR1d.png"></p></li><li><p>ä¿®æ”¹dcloud_control.xmlä¸­çš„appidï¼Œappidå°±æ˜¯åœ¨manifest.jsonæ–‡ä»¶ä¸­å®šä¹‰çš„idï¼Œ<strong>ä¸appsä¸‹çš„æ–‡ä»¶å¤¹åŒå</strong>ã€‚</p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hbuilder</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>apps</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>app</span> <span class="token attr-name">appid</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>H******E<span class="token punctuation">"</span></span> <span class="token attr-name">appver</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>apps</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>hbuilder</span><span class="token punctuation">></span></span></code></pre></li><li><p>è¿è¡Œé¡¹ç›®</p><p><img src="https://i.loli.net/2021/01/22/GdxfWMEgAlmUY6j.png"> </p></li></ol><h3 id="å››ã€æ•´åˆä¼ä¸šå¾®ä¿¡SDK"><a href="#å››ã€æ•´åˆä¼ä¸šå¾®ä¿¡SDK" class="headerlink" title="å››ã€æ•´åˆä¼ä¸šå¾®ä¿¡SDK"></a>å››ã€æ•´åˆä¼ä¸šå¾®ä¿¡SDK</h3><p>å®˜æ–¹sdkæ•´åˆé“¾æ¥ï¼š<a href="https://work.weixin.qq.com/api/doc/90000/90136/91194">Androidæ¥å…¥æŒ‡å—</a></p><ol><li><p>åœ¨ä¸‹è½½å¥½çš„ä¼ä¸šå¾®ä¿¡Demoä¸­ï¼Œå°†â€<em>\apitest_2\apitest\app\libs</em>â€œä¸­çš„libwwsdk.jarå¤åˆ¶åˆ°HBuilder-Helloçš„libsæ–‡ä»¶å¤¹ä¸­ï¼Œè¿™æ ·å°±æˆåŠŸçš„å¼•å…¥äº†ä¼ä¸šå¾®ä¿¡sdk</p></li><li><p>è¿›è¡Œä»£ç å¼€å‘ï¼Œå®˜æ–¹ç»™å‡ºçš„ä»£ç å¯¹ä¸çº¯AndroidåŸç”Ÿå¼€å‘çš„åº”ç”¨æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼ä½†æ˜¯ï¼Œæˆ‘ä»¬æ˜¯æ•´åˆäº†webAPPè¿›è¡Œçš„æ··åˆå¼€å‘ï¼<span class="github-emoji" style="color: transparent;background:no-repeat url(https://github.githubassets.com/images/icons/emoji/unicode/1f622.png?v8) center/contain" data-src="https://github.githubassets.com/images/icons/emoji/unicode/1f622.png?v8">ğŸ˜¢</span></p><p>è¿™é‡Œæˆ‘æ‰¾éå…¨ç½‘éƒ½æ²¡æ‰¾åˆ°è§£å†³æ–¹æ³•ï¼Œå¯èƒ½æ˜¯ä¼ä¸šå¾®ä¿¡é›†æˆçš„éœ€æ±‚ä¸å¤§ï¼Ÿè¸©äº†å¾ˆå¤šå‘ï¼Œåœ¨çœ‹äº†ä¸€å¤©çš„æºç ä¹‹åï¼Œæ‘¸ç´¢å‡ºä¸€æ¡è§£å†³åŠæ³•ï¼Œå› ä¸ºAndroidSDKä¸­æ˜¯æä¾›äº†å¾®ä¿¡ã€qqç­‰ç¬¬ä¸‰æ–¹ç™»å½•æ¥å£çš„ï¼Œæ‰€ä»¥æˆ‘ä¾è‘«èŠ¦ç”»ç“¢ï¼Œå¢åŠ äº†ä¸€ä¸ªä¼ä¸šå¾®ä¿¡çš„ç™»å½•æ¥å£ã€‚å¯ä»¥å‚è€ƒ<a href="https://ask.dcloud.net.cn/article/66">Androidå¹³å°ç¬¬ä¸‰æ–¹æ’ä»¶å¼€å‘æŒ‡å¯¼</a></p><ul><li><p>åœ¨â€<em>java\io\dcloud\HelloH5\wxapi</em>â€œä¸­æ–°å»ºç±»<strong>QyWeiXinOAuthService.java</strong>ç»§æ‰¿<strong>BaseOAuthService</strong>ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹</p><pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> io<span class="token punctuation">.</span>dcloud<span class="token punctuation">.</span>HelloH5<span class="token punctuation">.</span>wxapi<span class="token punctuation">;</span><span class="token keyword">import</span> android<span class="token punctuation">.</span>content<span class="token punctuation">.</span>Context<span class="token punctuation">;</span><span class="token keyword">import</span> android<span class="token punctuation">.</span>text<span class="token punctuation">.</span>TextUtils<span class="token punctuation">;</span><span class="token keyword">import</span> android<span class="token punctuation">.</span>widget<span class="token punctuation">.</span>Toast<span class="token punctuation">;</span><span class="token keyword">import</span> com<span class="token punctuation">.</span>tencent<span class="token punctuation">.</span>wework<span class="token punctuation">.</span>api<span class="token punctuation">.</span>IWWAPI<span class="token punctuation">;</span><span class="token keyword">import</span> com<span class="token punctuation">.</span>tencent<span class="token punctuation">.</span>wework<span class="token punctuation">.</span>api<span class="token punctuation">.</span>IWWAPIEventHandler<span class="token punctuation">;</span><span class="token keyword">import</span> com<span class="token punctuation">.</span>tencent<span class="token punctuation">.</span>wework<span class="token punctuation">.</span>api<span class="token punctuation">.</span>WWAPIFactory<span class="token punctuation">;</span><span class="token keyword">import</span> com<span class="token punctuation">.</span>tencent<span class="token punctuation">.</span>wework<span class="token punctuation">.</span>api<span class="token punctuation">.</span>model<span class="token punctuation">.</span>BaseMessage<span class="token punctuation">;</span><span class="token keyword">import</span> com<span class="token punctuation">.</span>tencent<span class="token punctuation">.</span>wework<span class="token punctuation">.</span>api<span class="token punctuation">.</span>model<span class="token punctuation">.</span>WWAuthMessage<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>json<span class="token punctuation">.</span>JSONArray<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>json<span class="token punctuation">.</span>JSONException<span class="token punctuation">;</span><span class="token keyword">import</span> org<span class="token punctuation">.</span>json<span class="token punctuation">.</span>JSONObject<span class="token punctuation">;</span><span class="token keyword">import</span> io<span class="token punctuation">.</span>dcloud<span class="token punctuation">.</span>common<span class="token punctuation">.</span>DHInterface<span class="token punctuation">.</span>IWebview<span class="token punctuation">;</span><span class="token keyword">import</span> io<span class="token punctuation">.</span>dcloud<span class="token punctuation">.</span>common<span class="token punctuation">.</span>adapter<span class="token punctuation">.</span>util<span class="token punctuation">.</span>AndroidResources<span class="token punctuation">;</span><span class="token keyword">import</span> io<span class="token punctuation">.</span>dcloud<span class="token punctuation">.</span>common<span class="token punctuation">.</span>adapter<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Logger<span class="token punctuation">;</span><span class="token keyword">import</span> io<span class="token punctuation">.</span>dcloud<span class="token punctuation">.</span>common<span class="token punctuation">.</span>adapter<span class="token punctuation">.</span>util<span class="token punctuation">.</span>PlatformUtil<span class="token punctuation">;</span><span class="token keyword">import</span> io<span class="token punctuation">.</span>dcloud<span class="token punctuation">.</span>common<span class="token punctuation">.</span>constant<span class="token punctuation">.</span>DOMException<span class="token punctuation">;</span><span class="token keyword">import</span> io<span class="token punctuation">.</span>dcloud<span class="token punctuation">.</span>common<span class="token punctuation">.</span>util<span class="token punctuation">.</span>JSUtil<span class="token punctuation">;</span><span class="token keyword">import</span> io<span class="token punctuation">.</span>dcloud<span class="token punctuation">.</span>common<span class="token punctuation">.</span>util<span class="token punctuation">.</span>StringUtil<span class="token punctuation">;</span><span class="token keyword">import</span> io<span class="token punctuation">.</span>dcloud<span class="token punctuation">.</span>common<span class="token punctuation">.</span>util<span class="token punctuation">.</span>ThreadPool<span class="token punctuation">;</span><span class="token keyword">import</span> io<span class="token punctuation">.</span>dcloud<span class="token punctuation">.</span>feature<span class="token punctuation">.</span>oauth<span class="token punctuation">.</span>BaseOAuthService<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">QyWeiXinOAuthService</span> <span class="token keyword">extends</span> <span class="token class-name">BaseOAuthService</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> IWWAPI iwwapi<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//ä¼ä¸šå¾®ä¿¡api</span>    <span class="token keyword">private</span> String code<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> String TAG <span class="token operator">=</span> <span class="token string">"QyWeiXinOAuthService"</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> String SCHEMA <span class="token operator">=</span> <span class="token string">"wwauth***********000006"</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//ä¼ä¸šå¾®ä¿¡æˆæƒç™»å½•ä¸­çš„SCHEMAï¼Œè·å–æ–¹æ³•è¯·å‚è€ƒæ­¥éª¤å…­</span>    <span class="token keyword">protected</span> <span class="token keyword">static</span> String appId <span class="token operator">=</span> null<span class="token punctuation">;</span>    <span class="token keyword">protected</span> <span class="token keyword">static</span> String agentId <span class="token operator">=</span> null<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">boolean</span> isAuth <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token function">QyWeiXinOAuthService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">hasFullConfigData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token operator">!</span>TextUtils<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>appId<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">initAuthOptions</span><span class="token punctuation">(</span>JSONObject mLoginOptions<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>mLoginOptions <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>            appId <span class="token operator">=</span> mLoginOptions<span class="token punctuation">.</span><span class="token function">optString</span><span class="token punctuation">(</span><span class="token string">"appid"</span><span class="token punctuation">,</span> appId<span class="token punctuation">)</span><span class="token punctuation">;</span>            Logger<span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span><span class="token string">"QyWeiXinOAuthService"</span><span class="token punctuation">,</span> <span class="token string">"initAuthOptions: appId"</span> <span class="token operator">+</span> appId<span class="token punctuation">)</span><span class="token punctuation">;</span>            agentId <span class="token operator">=</span> mLoginOptions<span class="token punctuation">.</span><span class="token function">optString</span><span class="token punctuation">(</span><span class="token string">"agentId"</span><span class="token punctuation">,</span> agentId<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">initMetaData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        appId <span class="token operator">=</span> AndroidResources<span class="token punctuation">.</span><span class="token function">getMetaValue</span><span class="token punctuation">(</span><span class="token string">"QYWX_APPID"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        agentId <span class="token operator">=</span> AndroidResources<span class="token punctuation">.</span><span class="token function">getMetaValue</span><span class="token punctuation">(</span><span class="token string">"QYWX_AGENTID"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span>Context context<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token string">"qyweixin"</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>description <span class="token operator">=</span> <span class="token string">"ä¼ä¸šå¾®ä¿¡"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">onLoginCallBack</span><span class="token punctuation">(</span>IWebview pWebViewImpl<span class="token punctuation">,</span> String pCallbackId<span class="token punctuation">,</span> <span class="token keyword">int</span> code<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">boolean</span> suc <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        String errorMsg <span class="token operator">=</span> <span class="token string">"send"</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>code <span class="token operator">==</span> WWAuthMessage<span class="token punctuation">.</span>ERR_OK<span class="token punctuation">)</span> <span class="token punctuation">{</span>            suc <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>code <span class="token operator">==</span> WWAuthMessage<span class="token punctuation">.</span>ERR_FAIL<span class="token punctuation">)</span> <span class="token punctuation">{</span>            errorMsg <span class="token operator">=</span> <span class="token string">"ç™»å½•å¤±è´¥"</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>code <span class="token operator">==</span> WWAuthMessage<span class="token punctuation">.</span>ERR_CANCEL<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">onLoginFinished</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getErrorJsonbject</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">"ç”¨æˆ·å–æ¶ˆ"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> pWebViewImpl<span class="token punctuation">,</span> pCallbackId<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>suc<span class="token punctuation">)</span> <span class="token punctuation">{</span>            JSUtil<span class="token punctuation">.</span><span class="token function">execCallback</span><span class="token punctuation">(</span>pWebViewImpl<span class="token punctuation">,</span> pCallbackId<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">makeResultJSONObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> JSUtil<span class="token punctuation">.</span>OK<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>            String msg <span class="token operator">=</span> DOMException<span class="token punctuation">.</span><span class="token function">toJSON</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">100</span><span class="token punctuation">,</span> errorMsg<span class="token punctuation">,</span> code<span class="token punctuation">)</span><span class="token punctuation">;</span>            JSUtil<span class="token punctuation">.</span><span class="token function">execCallback</span><span class="token punctuation">(</span>pWebViewImpl<span class="token punctuation">,</span> pCallbackId<span class="token punctuation">,</span> msg<span class="token punctuation">,</span> JSUtil<span class="token punctuation">.</span>ERROR<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">login</span><span class="token punctuation">(</span>IWebview pWebViewImpl<span class="token punctuation">,</span> JSONArray pJsArgs<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span>pWebViewImpl<span class="token punctuation">,</span> pJsArgs<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">hasGeneralError</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>mLoginWebViewImpl<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>mLoginCallbackId<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>PlatformUtil<span class="token punctuation">.</span><span class="token function">isAppInstalled</span><span class="token punctuation">(</span>pWebViewImpl<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"com.tencent.wework"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                String msg <span class="token operator">=</span> StringUtil<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"{code:%d,message:'%s'}"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token operator">-</span><span class="token number">8</span><span class="token punctuation">,</span> DOMException<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token string">"å®¢æˆ·ç«¯æœªå®‰è£…"</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                JSUtil<span class="token punctuation">.</span><span class="token function">execCallback</span><span class="token punctuation">(</span>pWebViewImpl<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>mLoginCallbackId<span class="token punctuation">,</span> msg<span class="token punctuation">,</span> JSUtil<span class="token punctuation">.</span>ERROR<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                ThreadPool<span class="token punctuation">.</span><span class="token function">self</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addThreadTask</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                        QyWeiXinOAuthService<span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">loginInThread</span><span class="token punctuation">(</span>QyWeiXinOAuthService<span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">.</span>mLoginWebViewImpl<span class="token punctuation">,</span> QyWeiXinOAuthService<span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">.</span>mLoginCallbackId<span class="token punctuation">,</span> QyWeiXinOAuthService<span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">.</span>mLoginOptions<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span>                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">authorize</span><span class="token punctuation">(</span>IWebview pwebview<span class="token punctuation">,</span> JSONArray pJsArgs<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">authorize</span><span class="token punctuation">(</span>pwebview<span class="token punctuation">,</span> pJsArgs<span class="token punctuation">)</span><span class="token punctuation">;</span>        String msg<span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>TextUtils<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>appId<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            msg <span class="token operator">=</span> StringUtil<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"{code:%d,message:'%s'}"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token operator">-</span><span class="token number">7</span><span class="token punctuation">,</span> DOMException<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token string">"ä¸šåŠ¡å‚æ•°é…ç½®ç¼ºå¤±"</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            JSUtil<span class="token punctuation">.</span><span class="token function">execCallback</span><span class="token punctuation">(</span>pwebview<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>mAuthCallbackId<span class="token punctuation">,</span> msg<span class="token punctuation">,</span> JSUtil<span class="token punctuation">.</span>ERROR<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>PlatformUtil<span class="token punctuation">.</span><span class="token function">isAppInstalled</span><span class="token punctuation">(</span>pwebview<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"com.tencent.wework"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            msg <span class="token operator">=</span> StringUtil<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"{code:%d,message:'%s'}"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token operator">-</span><span class="token number">8</span><span class="token punctuation">,</span> DOMException<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token string">"å®¢æˆ·ç«¯æœªå®‰è£…"</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            JSUtil<span class="token punctuation">.</span><span class="token function">execCallback</span><span class="token punctuation">(</span>pwebview<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>mAuthCallbackId<span class="token punctuation">,</span> msg<span class="token punctuation">,</span> JSUtil<span class="token punctuation">.</span>ERROR<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>            ThreadPool<span class="token punctuation">.</span><span class="token function">self</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addThreadTask</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    QyWeiXinOAuthService<span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">.</span>isAuth <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>                    QyWeiXinOAuthService<span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">loginInThread</span><span class="token punctuation">(</span>QyWeiXinOAuthService<span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">.</span>mAuthWebview<span class="token punctuation">,</span> QyWeiXinOAuthService<span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">.</span>mAuthCallbackId<span class="token punctuation">,</span> QyWeiXinOAuthService<span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">.</span>mAuthOptions<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">loginInThread</span><span class="token punctuation">(</span><span class="token keyword">final</span> IWebview pwebview<span class="token punctuation">,</span> <span class="token keyword">final</span> String callbackId<span class="token punctuation">,</span> JSONObject option<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>iwwapi <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">//æ³¨å†Œ</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>iwwapi <span class="token operator">=</span> WWAPIFactory<span class="token punctuation">.</span><span class="token function">createWWAPI</span><span class="token punctuation">(</span>pwebview<span class="token punctuation">.</span><span class="token function">getActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>iwwapi<span class="token punctuation">.</span><span class="token function">registerApp</span><span class="token punctuation">(</span>SCHEMA<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">final</span> WWAuthMessage<span class="token punctuation">.</span>Req req <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WWAuthMessage<span class="token punctuation">.</span>Req</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        req<span class="token punctuation">.</span>sch <span class="token operator">=</span> SCHEMA<span class="token punctuation">;</span>        req<span class="token punctuation">.</span>appId <span class="token operator">=</span> appId<span class="token punctuation">;</span>        req<span class="token punctuation">.</span>agentId <span class="token operator">=</span> agentId<span class="token punctuation">;</span>        req<span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token string">"combest"</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//æˆæƒæˆåŠŸä¹‹åçš„å›è°ƒå‡½æ•°</span>        iwwapi<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">IWWAPIEventHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">handleResp</span><span class="token punctuation">(</span>BaseMessage resp<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>resp <span class="token keyword">instanceof</span> <span class="token class-name">WWAuthMessage<span class="token punctuation">.</span>Resp</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    WWAuthMessage<span class="token punctuation">.</span>Resp rsp <span class="token operator">=</span> <span class="token punctuation">(</span>WWAuthMessage<span class="token punctuation">.</span>Resp<span class="token punctuation">)</span> resp<span class="token punctuation">;</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span>rsp<span class="token punctuation">.</span>errCode <span class="token operator">==</span> WWAuthMessage<span class="token punctuation">.</span>ERR_CANCEL<span class="token punctuation">)</span> <span class="token punctuation">{</span>                        Toast<span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span>pwebview<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"ç™»é™†å–æ¶ˆ"</span><span class="token punctuation">,</span> Toast<span class="token punctuation">.</span>LENGTH_SHORT<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>rsp<span class="token punctuation">.</span>errCode <span class="token operator">==</span> WWAuthMessage<span class="token punctuation">.</span>ERR_FAIL<span class="token punctuation">)</span> <span class="token punctuation">{</span>                        Toast<span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span>pwebview<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"ç™»é™†å¤±è´¥"</span><span class="token punctuation">,</span> Toast<span class="token punctuation">.</span>LENGTH_SHORT<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>rsp<span class="token punctuation">.</span>errCode <span class="token operator">==</span> WWAuthMessage<span class="token punctuation">.</span>ERR_OK<span class="token punctuation">)</span> <span class="token punctuation">{</span>                        Toast<span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span>pwebview<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"ç™»é™†æˆåŠŸ"</span><span class="token punctuation">,</span>                                Toast<span class="token punctuation">.</span>LENGTH_SHORT<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        QyWeiXinOAuthService<span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">.</span>code <span class="token operator">=</span> rsp<span class="token punctuation">.</span>code<span class="token punctuation">;</span>                        JSUtil<span class="token punctuation">.</span><span class="token function">execCallback</span><span class="token punctuation">(</span>pwebview<span class="token punctuation">,</span> callbackId<span class="token punctuation">,</span> QyWeiXinOAuthService<span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">makeResultJSONObject</span><span class="token punctuation">(</span>rsp<span class="token punctuation">.</span>code<span class="token punctuation">)</span><span class="token punctuation">,</span> JSUtil<span class="token punctuation">.</span>OK<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onLoginFinished</span><span class="token punctuation">(</span>JSONObject msg<span class="token punctuation">,</span> <span class="token keyword">boolean</span> suc<span class="token punctuation">,</span> IWebview pwebview<span class="token punctuation">,</span> String callbackId<span class="token punctuation">)</span> <span class="token punctuation">{</span>        JSUtil<span class="token punctuation">.</span><span class="token function">execCallback</span><span class="token punctuation">(</span>pwebview<span class="token punctuation">,</span> callbackId<span class="token punctuation">,</span> msg<span class="token punctuation">,</span> suc <span class="token operator">?</span> JSUtil<span class="token punctuation">.</span>OK <span class="token operator">:</span> JSUtil<span class="token punctuation">.</span>ERROR<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>isAuth<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>mAuthWebview <span class="token operator">=</span> null<span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>mAuthCallbackId <span class="token operator">=</span> null<span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>mLoginCallbackId <span class="token operator">=</span> null<span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>mLoginWebViewImpl <span class="token operator">=</span> null<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">logout</span><span class="token punctuation">(</span>IWebview pWebViewImpl<span class="token punctuation">,</span> JSONArray pJsArgs<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">logout</span><span class="token punctuation">(</span>pWebViewImpl<span class="token punctuation">,</span> pJsArgs<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">hasGeneralError</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>mLogoutWebViewImpl<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>mLogoutCallbackId<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">removeToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>userInfo <span class="token operator">=</span> null<span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>authResult <span class="token operator">=</span> null<span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">onLogoutFinished</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">makeResultJSONObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>iwwapi <span class="token operator">=</span> null<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> JSONObject <span class="token function">makeResultJSONObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        JSONObject sucJSON <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JSONObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            sucJSON<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"authResult"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>authResult<span class="token punctuation">)</span><span class="token punctuation">;</span>            String state <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token string">"state"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            sucJSON<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"state"</span><span class="token punctuation">,</span> state<span class="token punctuation">)</span><span class="token punctuation">;</span>            sucJSON<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"code"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">JSONException</span> var3<span class="token punctuation">)</span> <span class="token punctuation">{</span>            var3<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> sucJSON<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> JSONObject <span class="token function">makeResultJSONObject</span><span class="token punctuation">(</span>String code<span class="token punctuation">)</span> <span class="token punctuation">{</span>        JSONObject sucJSON <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JSONObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            String state <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token string">"state"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            sucJSON<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"state"</span><span class="token punctuation">,</span> state<span class="token punctuation">)</span><span class="token punctuation">;</span>            sucJSON<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"authResult"</span><span class="token punctuation">,</span> code<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">JSONException</span> var3<span class="token punctuation">)</span> <span class="token punctuation">{</span>            var3<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> sucJSON<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre></li></ul></li></ol><ul><li><p>åœ¨dcloud_properties.xmlæ–‡ä»¶ä¸­ï¼Œæœç´¢OAuthï¼Œåœ¨name=â€OAuthâ€çš„<feature>ä¸­æ·»åŠ ä¸€è¡Œ<module></module></feature></p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feature</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>OAuth<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>io.dcloud.feature.oauth.OAuthFeatureImpl<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>module</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>OAuth-Weixin<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>io.dcloud.feature.oauth.weixin.WeiXinOAuthService<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>module</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>OAuth-QQ<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>io.dcloud.feature.oauth.qq.QQOAuthService<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>module</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>OAuth-Sina<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>io.dcloud.feature.oauth.sina.SinaOAuthService<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>module</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>OAuth-Qihoo<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>io.dcloud.oauth.qihoo.QihooOAuthService<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>module</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>OAuth-MiUi<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>io.dcloud.feature.oauth.miui.MiUiOAuthService<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>module</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>OAuth-QyWeixin<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>io.dcloud.HelloH5.wxapi.QyWeiXinOAuthService<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feature</span><span class="token punctuation">></span></span></code></pre></li><li><p>åœ¨AndroidManifest.xmlæ–‡ä»¶ä¸­ï¼Œæ·»åŠ ä¼ä¸šå¾®ä¿¡appidå’Œagentidçš„å®šä¹‰</p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta-data</span>            <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>QYWX_APPID<span class="token punctuation">"</span></span>            <span class="token attr-name"><span class="token namespace">android:</span>value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>ww**********cfae<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta-data</span>           <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>QYWX_AGENTID<span class="token punctuation">"</span></span>           <span class="token attr-name"><span class="token namespace">android:</span>value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1000006<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></code></pre></li></ul><h3 id="äº”ã€å…³é”®ï¼webAPPä¸Androidä¹‹é—´çš„é€šä¿¡ï¼Œä¼ é€’å‚æ•°"><a href="#äº”ã€å…³é”®ï¼webAPPä¸Androidä¹‹é—´çš„é€šä¿¡ï¼Œä¼ é€’å‚æ•°" class="headerlink" title="äº”ã€å…³é”®ï¼webAPPä¸Androidä¹‹é—´çš„é€šä¿¡ï¼Œä¼ é€’å‚æ•°"></a>äº”ã€<span style="color:red">å…³é”®ï¼</span>webAPPä¸Androidä¹‹é—´çš„é€šä¿¡ï¼Œä¼ é€’å‚æ•°</h3><ol><li><h4 id="webAPPç«¯"><a href="#webAPPç«¯" class="headerlink" title="webAPPç«¯"></a>webAPPç«¯</h4><p>æ¥å£è¯´æ˜é“¾æ¥ï¼š<a href="http://www.html5plus.org/doc/zh_cn/oauth.html#plus.oauth.getServices">OAuthæ¨¡å—</a></p><p>å¦‚æœä½ ä¹Ÿæ˜¯å’Œæˆ‘ä¸€æ ·ç”¨Vueå¼€å‘çš„APPï¼Œå¯ä»¥è¿™æ ·å†™</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">let</span> instance <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>window<span class="token punctuation">.</span>plus<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>    plus<span class="token punctuation">.</span>oauth<span class="token punctuation">.</span><span class="token function">getServices</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>services<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">var</span> qyweixin<span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token keyword">in</span> services<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">var</span> service<span class="token operator">=</span>services<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>JSON<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>service<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>service<span class="token punctuation">.</span>id <span class="token operator">==</span> <span class="token string">"qyweixin"</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                qyweixin <span class="token operator">=</span> service<span class="token punctuation">;</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>qyweixin<span class="token punctuation">)</span><span class="token punctuation">{</span>        qyweixin<span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token comment" spellcheck="true">// Toast(JSON.stringify(qyweixin.authResult));</span>            instance<span class="token punctuation">.</span><span class="token function">getUserInfo</span><span class="token punctuation">(</span>qyweixin<span class="token punctuation">.</span>authResult<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//æ ¹æ®codeå’Œaccess_tokenè·å–ç”¨æˆ·ä¿¡æ¯</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>            plus<span class="token punctuation">.</span>nativeUI<span class="token punctuation">.</span><span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"è¯¦æƒ…é”™è¯¯ä¿¡æ¯è¯·å‚è€ƒæˆæƒç™»å½•(OAuth)è§„èŒƒæ–‡æ¡£ï¼šhttp://www.html5plus.org/#specification#/specification/OAuth.html"</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token string">"ç™»å½•å¤±è´¥["</span><span class="token operator">+</span>e<span class="token punctuation">.</span>code<span class="token operator">+</span><span class="token string">"]ï¼š"</span><span class="token operator">+</span>e<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token function">Toast</span><span class="token punctuation">(</span><span class="token string">'è·å–ç™»å½•è®¤è¯å¤±è´¥ï¼š'</span><span class="token operator">+</span>e<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></li><li><h4 id="Androidç«¯"><a href="#Androidç«¯" class="headerlink" title="Androidç«¯"></a>Androidç«¯</h4><p><strong>åŒæ­¥æ‰§è¡Œæ–¹æ³•ï¼š</strong>JSUtil.wrapJsVar(â€œHtml5 Plus Plugin Hello1!â€,true);</p><blockquote><p><code>String wrapJsVar(String value, boolean isString);</code></p><p>è½¬æ¢JSå±‚çš„è¿”å›å€¼ï¼Œä¹Ÿç”¨äºå¼‚æ­¥æ¥å£ä¸­å›è°ƒå‡½æ•°çš„å‚æ•°ã€‚</p><p><strong>å‚æ•°è¯´æ˜ï¼š</strong><br><strong>valueï¼š</strong> è¦è¿”å›åˆ°JSå±‚çš„å€¼<br><strong>isStringï¼š</strong>è¿”å›å€¼ç±»å‹æ˜¯å¦ä¸ºåŸå§‹å­—ç¬¦ä¸²<br><strong>è¿”å›æ–¹æ³•ï¼š</strong><br><strong>booleaç±»å‹ï¼š</strong> wrapJSVar( â€œtrueâ€, false );<br><strong>Numberç±»å‹ï¼š</strong> wrapJsVar( â€œ99â€, false );<br><strong>Stringç±»å‹ï¼š</strong> wrapJsVar( â€œhelloâ€, true );<br><strong>æ•°ç»„ç±»å‹ï¼š</strong> wrapJsVar( â€œ[1,2,3,4,5]â€, false );<br><strong>JSONç±»å‹ï¼š</strong> wrapJsVar( â€œ{â€˜nameâ€™:â€™valueâ€™}â€, false );</p></blockquote><p><strong>å¼‚æ­¥æ‰§è¡Œæ–¹æ³•ï¼š</strong>JSUtil.execCallback(pWebview , pCallbackId, msg, JSUtil.ERROR, true, false);</p><blockquote><p><code>String execCallback(IWebview pWebView, String pCallbackId, String pMessage, int pStatus, boolean isJson, boolean pKeepCallback);</code></p><p>è§¦å‘æ‰©å±•æ’ä»¶ä¸­çš„å›è°ƒæ–¹æ³•ã€‚</p><p><strong>å‚æ•°è¯´æ˜ï¼š</strong><br><strong>pWebViewï¼š</strong>æ‰©å±•æ’ä»¶æ–¹æ³•è¿è¡Œçš„çª—å£<br><strong>pCallbackIdï¼š</strong>å›è°ƒå‡½æ•°çš„å”¯ä¸€æ ‡è¯†<br><strong>pMessageï¼š</strong>å›è°ƒå‡½æ•°çš„å‚æ•°<br><strong>pStatusï¼š</strong>æ“ä½œæ˜¯å¦æˆåŠŸï¼ŒæˆåŠŸåˆ™ä½¿ç”¨JSUtil.OKï¼Œå¦åˆ™ä½¿ç”¨é”™è¯¯ä»£ç <br><strong>isJsonï¼š</strong>å›è°ƒå‡½æ•°å‚æ•°æ˜¯å¦ä¸ºJSONæ•°æ®<br><strong>pKeepCallbackï¼š</strong>æ˜¯å¦å¯å¤šæ¬¡è§¦å‘å›è°ƒå‡½æ•°</p></blockquote></li><li><h4 id="åç«¯"><a href="#åç«¯" class="headerlink" title="åç«¯"></a>åç«¯</h4><p>æ ¹æ®å¾—åˆ°çš„codeè·å–ä¼ä¸šå¾®ä¿¡çš„userInfoï¼Œè¿™é‡Œç”¨åˆ°äº†<a href="https://gitee.com/binary/weixin-java-tools">WxJava</a>ï¼Œå…·ä½“æ•´åˆæ–¹æ³•è¿™é‡Œå°±ä¸å†è¿‡å¤šçš„å™è¿°äº†ï¼Œå…·ä½“å¯ä»¥æŸ¥çœ‹æ–‡æ¡£<a href="https://github.com/Wechat-Group/WxJava/wiki/%E4%BC%81%E4%B8%9A%E5%8F%B7%E5%BC%80%E5%8F%91%E6%96%87%E6%A1%A3">ä¼ä¸šå·å¼€å‘æ–‡æ¡£</a>ï¼Œjavaä»£ç å¦‚ä¸‹ï¼š</p><pre class=" language-java"><code class="language-java">String accessToken <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>WxCpDefaultConfigImpl config <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WxCpDefaultConfigImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>config<span class="token punctuation">.</span><span class="token function">setCorpId</span><span class="token punctuation">(</span><span class="token string">"ww*********fae"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">// è®¾ç½®å¾®ä¿¡ä¼ä¸šå·çš„appid</span>config<span class="token punctuation">.</span><span class="token function">setCorpSecret</span><span class="token punctuation">(</span><span class="token string">"lv**********************fu1S02c0"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">// è®¾ç½®å¾®ä¿¡ä¼ä¸šå·çš„app corpSecret</span>config<span class="token punctuation">.</span><span class="token function">setAgentId</span><span class="token punctuation">(</span><span class="token number">1000006</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment" spellcheck="true">// è®¾ç½®å¾®ä¿¡ä¼ä¸šå·åº”ç”¨ID</span>WxCpServiceImpl wxCpService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WxCpServiceImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>wxCpService<span class="token punctuation">.</span><span class="token function">setWxCpConfigStorage</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>accessToken <span class="token operator">=</span> wxCpService<span class="token punctuation">.</span><span class="token function">getAccessToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>WxCpOauth2UserInfo res <span class="token operator">=</span>  wxCpService<span class="token punctuation">.</span><span class="token function">getOauth2Service</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getUserInfo</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//æ ¹æ®userIdè·å–è¯¦ç»†ä¿¡æ¯</span>WxCpUser weChatUser <span class="token operator">=</span> wxCpService<span class="token punctuation">.</span><span class="token function">getUserService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getById</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span><span class="token function">getUserId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></li></ol><h3 id="å…­ã€åœ¨ä¼ä¸šå¾®ä¿¡ä¼ä¸šç®¡ç†åå°ä¸­è¿›è¡Œé…ç½®"><a href="#å…­ã€åœ¨ä¼ä¸šå¾®ä¿¡ä¼ä¸šç®¡ç†åå°ä¸­è¿›è¡Œé…ç½®" class="headerlink" title="å…­ã€åœ¨ä¼ä¸šå¾®ä¿¡ä¼ä¸šç®¡ç†åå°ä¸­è¿›è¡Œé…ç½®"></a>å…­ã€åœ¨ä¼ä¸šå¾®ä¿¡ä¼ä¸šç®¡ç†åå°ä¸­è¿›è¡Œé…ç½®</h3><ol><li><p>åœ¨è‡ªå»ºåº”ç”¨ä¸­ï¼Œå¯ç”¨ä¼ä¸šå¾®ä¿¡æˆæƒç™»å½•</p><p><img src="https://i.loli.net/2021/01/22/ErJeIFib5ORQa7L.png"> </p></li><li><p>è¿˜è®°å¾—æˆ‘ä»¬åœ¨ç¬¬ä¸€æ­¥ï¼Œæ‰‹æœºç«¯ä¸‹è½½çš„ç”Ÿæˆç­¾åçš„APPå—ï¼Œè¿™é‡Œå°±éœ€è¦ç”¨åˆ°å®ƒäº†ï¼Œåœ¨HBuilder-Helloé¡¹ç›®çš„AndroidManifest.xmlæ–‡ä»¶ä¸­å¯ä»¥æŸ¥çœ‹åˆ°å½“å‰é¡¹ç›®çš„åŒ…å</p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>manifest</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">xmlns:</span>tools</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://schemas.android.com/tools<span class="token punctuation">"</span></span>    <span class="token attr-name">package</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>io.dcloud.HelloH5<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></code></pre></li><li><p>åœ¨APPä¸­è¾“å…¥åŒ…åï¼Œå¾—åˆ°ç­¾åå›å¡«åˆ°ä¼ä¸šå¾®ä¿¡ç®¡ç†åå°</p><p><img src="https://i.loli.net/2021/01/22/AC34EVwWPgMl6bp.png"> </p><hr><p>è‡³æ­¤ï¼Œæ•´ä¸ªè¿‡ç¨‹å°±å®Œç¾ç»“æŸå•¦~â€‹ <span class="github-emoji" style="color: transparent;background:no-repeat url(https://github.githubassets.com/images/icons/emoji/unicode/1f4ae.png?v8) center/contain" data-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4ae.png?v8">ğŸ’®</span></p></li></ol><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯æ–‡æ¡£ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
            <tag> WebApp </tag>
            
            <tag> ä¼ä¸šå¾®ä¿¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ¯•ä¸šå­£</title>
      <link href="2020/10/01/bi-ye-ji/"/>
      <url>2020/10/01/bi-ye-ji/</url>
      
        <content type="html"><![CDATA[<h3 id="emsp-åœ¨å¹¿è¢¤çš„ç©ºé—´å’Œæ— é™çš„æ—¶é—´ä¸­-èƒ½ä¸ä½ ä»¬å…±äº«ä¸€é¢—è¡Œæ˜Ÿå’ŒåŒä¸€æ®µæ—¶å…‰-æ˜¯æˆ‘çš„è£å¹¸"><a href="#emsp-åœ¨å¹¿è¢¤çš„ç©ºé—´å’Œæ— é™çš„æ—¶é—´ä¸­-èƒ½ä¸ä½ ä»¬å…±äº«ä¸€é¢—è¡Œæ˜Ÿå’ŒåŒä¸€æ®µæ—¶å…‰-æ˜¯æˆ‘çš„è£å¹¸" class="headerlink" title="â€ƒåœ¨å¹¿è¢¤çš„ç©ºé—´å’Œæ— é™çš„æ—¶é—´ä¸­,èƒ½ä¸ä½ ä»¬å…±äº«ä¸€é¢—è¡Œæ˜Ÿå’ŒåŒä¸€æ®µæ—¶å…‰,æ˜¯æˆ‘çš„è£å¹¸"></a><strong><font color="#996699">â€ƒåœ¨å¹¿è¢¤çš„ç©ºé—´å’Œæ— é™çš„æ—¶é—´ä¸­,èƒ½ä¸ä½ ä»¬å…±äº«ä¸€é¢—è¡Œæ˜Ÿå’ŒåŒä¸€æ®µæ—¶å…‰,æ˜¯æˆ‘çš„è£å¹¸</font></strong></h3><hr><p><img src="https://raw.githubusercontent.com/Zoracxz/Random-img/master/house.jpg" alt="love &amp; peace"></p><h2 id="æˆ‘ä»¬æƒ³è¯´çš„è¯"><a href="#æˆ‘ä»¬æƒ³è¯´çš„è¯" class="headerlink" title="æˆ‘ä»¬æƒ³è¯´çš„è¯"></a>æˆ‘ä»¬æƒ³è¯´çš„è¯</h2><p>é»„ğŸ•ï¼š</p><blockquote><p>æˆ‘æ€»æ˜¯è¯´è¦å»å¨Ÿï¼ˆæˆ‘çš„é”¤å­ï¼‰å®¶é‡Œï¼Œå»åƒå¥¹å®¶çš„é¸½å­ï¼ˆè™½ç„¶å¥¹ä¸è®©æˆ‘åƒï¼Œä½†è°åˆcareå‘¢ï¼‰å»çœ‹å¥¹å®¶çš„æ¢¯ç”°å»ä¸‹ä¸€å—æ„Ÿâ€¬â€¬åœ¨è¿™æ ·ä¸€ä¸ªçƒ­æƒ…çƒˆçƒ­â€¬â€¬çš„å®¶åº­é‡Œæœ‰å¤šä¹ˆçš„å¿ƒèˆ’â€¬â€¬å¹¸ç¦ã€‚æ˜¯å¯â€¬â€¬éƒ½æ¯•ä¸šäº†æˆ‘æ˜¯è¿˜â€¬â€¬æ²¡å»æˆã€‚</p></blockquote><hr><blockquote><p>æ€»æ˜¯åº”ç­”â€¬â€¬ä¸½çï¼ˆæˆ‘çš„çŠ¬å„¿å­ï¼‰è¦å’Œå¥¹å»æ—¥æœ¬å»é•¿ç™½å±±å»è¥¿å®â€¬â€¬å»éæœ‰æ‰€â€¬â€¬åœ°æ–¹ç©ï¼Œè¦å¸¦å¥¹æ¥åŒ—æµ·åƒç²‰ï¼ˆä½†æ˜¯ä¸è®¸å¥¹ä½å®¶æˆ‘â€¬â€¬è®©å¥¹å»æµæµªï¼‰å¸¦å¥¹å»æ¶ æ´²å²›ç©ã€‚å¯æ˜¯åˆ°åæœ€â€¬â€¬æ¯•ä¸šäº†æˆ‘è¿˜æ˜¯éª—äº†å¥¹å“ˆå“ˆå“ˆâ€¬â€¬å“ˆå“ˆå“ˆã€‚</p></blockquote><hr><blockquote><p>æ˜¯æ€»â€¬â€¬è¯´è¦åœ¨çŒªå“¥ï¼ˆæˆ‘çš„éº»æ‰¹ï¼‰è¿˜åœ¨æ—¥æœ¬ä¹¦è¯»â€¬â€¬çš„æ—¶å€™å»æ—¥æœ¬å’Œä¸½çèµ·ä¸€â€¬â€¬æ‰¾ä»–ç©ï¼Œä½å¥¹çš„å®¿èˆç¡ä»–çš„åºŠå ç”¨å¥¹çš„æ—¶é—´é™ªæˆ‘ä»¬ç©ï¼ˆéƒ½æ˜¯ä¸½çè¯´çš„ï¼Œçä¸½â€¬â€¬èµ–çš®å¤©ä¸‹æ— æ•Œï¼‰ã€‚å¯æ˜¯åˆ°çŒªå“¥å›æ²™é•¿â€¬â€¬äº†æˆ‘è¿˜æ˜¯æ²¡å»æˆï¼Œåˆè®©ä¸½çç‹—å­å„¿â€¬â€¬ä¸€ä¸ªäººå»äº†å“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆã€‚</p></blockquote><hr><blockquote><p>â€ƒæ†¾é—â€¬â€¬è¿™ä¸¤å¤©æ²¡æœ‰å›å»å’Œå¥¹ä»¬ä¸€èµ·åº¦è¿‡æœ€åè¿™è¿™â€¬â€¬æ‰“é—¹çš„æ—¶é—´ï¼Œåˆ°æƒ³â€¬â€¬ä»¥åä¼šä¸â€¬â€¬å†å¬åˆ°çä¸½â€¬â€¬ç‹¬ç‰¹çš„å¤§å—“é—¨ï¼Œå§¨å¦ˆç—›æ—¶åœ°å–Šå¤©å“­â€¬â€¬çš„å£°éŸ³å§”å±ˆçš„è¯´æˆ‘ä»¬ä¸å…³å¿ƒå¥¹å“ˆå“ˆå“ˆï¼Œå†ä¼šä¸â€¬â€¬æœ‰äººæ·±æ›´åŠå¤œæ€æˆ‘å¸˜åºŠâ€¬â€¬äº†ï¼Œå†ä¹Ÿä¸èƒ½è·‘åˆ°ä¸½çä¸ŠåºŠâ€¬â€¬æå¥¹äº†ï¼Œå†ä¹Ÿä¸èƒ½æ·±æ›´åŠå¤œåœ¨äºšå¨Ÿçš„åºŠåº•ä¸‹æ¡Œå­ç”¨ä¸Šâ€¬â€¬å¥¹çš„ç”µè„‘å†™ä½œä¸šï¼Œå†ä¹Ÿä¸èƒ½è·Ÿäºšå¨Ÿä¸€èµ·å»å‡ºâ€¬â€¬é€›ç†å·¥åŒ—é—¨äº†ï¼Œå†ä¹Ÿä¸èƒ½è°ƒä¾ƒäºšå¨Ÿé‚£äº›å“¥å“¥ä»¬äº†ï¼Œå†ä¹Ÿä¸èƒ½çœ‹åˆ°äºšå¨Ÿæ•´å¤©å¾˜å¾Šåœ¨æˆ‘çš„è¡£æœåŒ…åŒ…â€¬â€¬æ—è¾¹é‚£æš—ç¤ºçš„çœ¼ç¥ï¼Œå¦‚æœèƒ½æ¥é‡â€¬â€¬ä¸€æ¬¡æˆ‘ä¸€å®šä¼šå‘Šè¯‰ä½ ï¼&nbsp;ä¼‘æƒ³ç¢°ï¼èƒ½ä¸ä¹Ÿå†â€¬â€¬è®©çŒªå“¥ä»‹ç»æœ¬æ—¥â€¬â€¬å°å“¥å“¥ç»™æˆ‘ï¼ˆå…¶å®æ˜¯äºšå¨Ÿï¼‰è®¤è¯†äº†ï¼Œå†ä¹Ÿä¸èƒ½è®©å“¥çŒªâ€¬â€¬ç»™æˆ‘è€ƒè¯•å‰ä¸´æ—¶è„šä½›æŠ±â€¬â€¬äº†ï¼Œå†ä¹Ÿä¸èƒ½åƒåˆ°çŒªå“¥ä»å®¶é‡Œå¸¦æ¥çš„è¾£æ¡å’Œé…±æ¿é¸­äº†ï¼Œå†ä¹Ÿä¸èƒ½åˆ°åƒâ€¬â€¬çŒªå“¥åšçš„è¾£æ¤’ç‚’è‚‰ï¼ˆæˆ‘çš„æœ€çˆ±ï¼‰äº†ï¼ï¼ï¼ï¼<br>â€ƒç¦»å¼€äº†å¥¹ä»¬æˆ‘çš„çœŸâ€¬â€¬å¥½ä¼¤å¿ƒï¼Œåä»¥â€¬â€¬è·¯ä¸Šå†ä¹Ÿæ²¡æœ‰äººç»™æˆ‘æ­è†€è‚©â€¬â€¬äº†ï¼ˆè™½ç„¶æˆ‘éƒ½å°å¼€â€¬â€¬ç”µé©´ï¼‰ï¼Œæˆ‘å†ä¹Ÿä¸èƒ½åœ¨å®¿èˆäºŒæŒ‘ä¸€â€¬â€¬æŠŠçŒªå’Œç‹—å¹²è¶´ä¸‹äº†å“ˆå“ˆå“ˆå“ˆå“ˆå“ˆï¼ˆæ€æ„å°â€¬â€¬å°æ„æ€ï¼Œä¸ç”¨å¤¸æˆ‘ï¼‰ï¼Œå†ä¹Ÿä¸èƒ½åœ¨åºŠä¸Šä½¿å”¤ä»¬ä»–â€¬â€¬å¸®æˆ‘æ‹¿ä¸œè¥¿äº†ï¼ˆä¸ŠåºŠâ€¬â€¬ç”Ÿæ ¹äº†æ²¡åŠæ³•ï¼‰ï¼Œèƒ½ä¸ä¹Ÿå†â€¬â€¬åœ¨äºšå¨Ÿç”µè„‘ä¸Šæˆ‘çš„ä¸“å±æ–‡ä»¶å¤¹é‡ŒåŠ å¢â€¬â€¬å±äºæˆ‘çš„ä¸œè¥¿äº†ï¼ˆåœ¨äºšå¨Ÿçš„ç”µè„‘é‡Œæˆ‘çš„ä¸“å±å¤¹ä»¶æ–‡â€¬â€¬å¤§æ¦‚ä¹Ÿå°±å åŠä¸€â€¬â€¬å†…å­˜å§å“ˆå“ˆâ€¬â€¬å“ˆå“ˆå“ˆ<br><br><br><br><img src="https://github.com/Zoracxz/Random-img/raw/master/line.png" alt="æˆ‘æ˜¯åˆ†å‰²çº¿"></p></blockquote><p>å¨Ÿï¼š</p><blockquote><p><strong><font color="#FF9966">åœ¨å¤å¤©é‡è§çš„å°±åœ¨å¤å¤©å‘Šåˆ«å§</font></strong></p><blockquote><p><a href="https://mp.weixin.qq.com/s/kkCKPbjUSPDm0gHAGDeJGQ"><font color="#99CC99">ã“ã®å¤</font></a></p></blockquote></blockquote><p><img src="https://github.com/Zoracxz/Random-img/raw/master/start.jpg" alt="é“¶æ²³"><br>æˆ‘å¾ˆåº†å¹¸åœ¨æœ€ç¾å¥½çš„æ—¶é—´é‡Œé‡åˆ°ä½ ä»¬ï¼Œå¸Œæœ›æˆ‘ä»¬æœªæ¥éƒ½è¶Šæ¥è¶Šå¥½ã€‚</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      
        <tags>
            
            <tag> ä¸æƒ³ä¸ºäººçŸ¥çš„å°çŸ«æƒ… </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
